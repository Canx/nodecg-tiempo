<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript">
    
    function send(message) {
        nodecg.sendMessage(message);
    }

    function reset() {
        let minutes = Number(document.getElementById('minutes').value);
        let seconds = Number(document.getElementById('seconds').value);

        seconds = seconds + minutes*60;
        nodecg.sendMessage("reset", seconds);
    }

    function update_scoreboard(esgol) {
        data = {
            gol: esgol,
            local: {
                nombre: document.getElementById('localname').value,
                nombrelargo: document.getElementById('localnamelong').value,
                color: document.getElementById('localcolor').value,
                goles: document.getElementById('goleslocal').value},
            visitante: {
                nombre: document.getElementById('visitantename').value,
                nombrelargo: document.getElementById('visitantenamelong').value,
                color: document.getElementById('visitantecolor').value,
                goles: document.getElementById('golesvisitante').value}
        };

        console.log(data);
        nodecg.sendMessage("scoreboard", data);
    }

    function gol_local() {
        document.getElementById('goleslocal').value++;
        update_scoreboard(true);
    }

    function gol_visitante() {
        document.getElementById('golesvisitante').value++;
        update_scoreboard(true);
    }

    function show(cb) {
        nodecg.sendMessage("hide", cb.checked);
    }

    function showBig(cb) {
        nodecg.sendMessage("hideBig", cb.checked);
    }

    function showRoster(cb) {
        nodecg.sendMessage("hideRoster", cb.checked);
    }
    </script>
</head>
<body>
    <div id="startstop">
        <button type="button" onclick="send('start')">Start</button> 
        <button type="button" onclick="send('stop')">Stop</button> 
    </div>
    <div id="reset">
        <input type="number" id="minutes" min="0" max="99" value="0">
        <input type="number" id="seconds" min="0" max="59" value="0">
        <button type="button" onclick="reset()">Reset</button> 
    </div>
    <div id="local">
        <input type="text" id="localname" value="LOC" size="3">
        <input type="text" id="localnamelong" value="Local" size="20">
        <input type="color" id="localcolor" value="#ff0000">
        <input type="number" id="goleslocal" min="0" max="99" value="0">
        <button type="button" id="boton_gollocal" onclick="gol_local()">Gol!</button> 
    </div>
    <div id="visitante">
        <input type="text" id="visitantename" value="VIS" size="3">
        <input type="text" id="visitantenamelong" value="Visitante" size="20">
        <input type="color" id="visitantecolor" value="#0000ff">
        <input type="number" id="golesvisitante" min="0" max="99" value="0">
        <button type="button" id="boton_golvisitante" onclick="gol_visitante()">Gol!</button> 
    </div>
    <div id="update_score">
        <button type="button" onclick="update_scoreboard(false)">Update score</button> 
    </div>
    <div id="showhide">
        Mostrar marcador pequeño: <input type="checkbox" onclick="show(this)" checked>
    </div>
    <div id="showhideBig">
        Mostrar marcador grande: <input type="checkbox" onclick="showBig(this)" checked>
    </div>
    <div id="showhideBig">
        Mostrar alineación: <input type="checkbox" onclick="showRoster(this)" checked>
    </div>
</body>
</html>
